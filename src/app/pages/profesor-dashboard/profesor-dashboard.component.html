<h2 class="title">Profesor Dashboard</h2>

<!-- Course Selector -->
<div *ngIf="courses.length > 0" class="form-group">
  <label for="course-select">Select Course:</label>
  <select id="course-select" (change)="onCourseChange($event)">
    <option value="" disabled selected>Select a course</option>
    <option *ngFor="let course of courses" [value]="course.id">
      {{ course.Name || course.name }}
    </option>
  </select>
</div>

<p *ngIf="courses.length === 0" class="no-courses">No courses found for this professor.</p>

<!-- Student List -->
<div *ngIf="selectedCourse" class="student-section">
  <h3>Students in {{ selectedCourse.Name || selectedCourse.name }}</h3>

  <table class="student-table">
    <thead>
      <tr>
        <th>Student ID</th>
        <th>Grades</th>
        <th>Average</th>
        <th>New Grade</th>
        <th>Attendance</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let student of enrolledStudents">
        <td>{{ student.name }}</td>
        <td>{{ student.grades?.join(', ') || '—' }}</td>
        <td>{{ student.average || '-' }}</td>
        <td>
          <input type="number" [(ngModel)]="student.newGrade" class="grade-input" />
          <button class="add-btn" (click)="addGrade(student)">Add</button>
        </td>
        <td>
          <button class="attendance present" (click)="markAttendance(student.StudentId, 'present')">✔️</button>
          <button class="attendance absent" (click)="markAttendance(student.StudentId, 'absent')">❌</button>
        </td>
      </tr>
    </tbody>
  </table>
  <p><strong>Class average:</strong> {{ classAverage }}</p>
</div>
